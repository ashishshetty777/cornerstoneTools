{"version":3,"sources":["webpack://cornerstoneTools/./tools/base/BaseBrushTool.js","webpack://cornerstoneTools/./util/debugLib/common.js","webpack://cornerstoneTools/./util/debugLib/index.js"],"names":["getModule","configuration","getters","setters","BaseBrushTool","props","defaultProps","alwaysEraseOnClick","updateOnMouseMove","hideDefaultCursor","_drawing","_drawingMouseUpCallback","bind","evt","Error","name","currentPoints","detail","_lastImageCoords","image","_paint","eventData","element","_startPainting","_startListeningForMouseUp","labelmap2D","labelmap3D","currentImageIdIndex","activeLabelmapIndex","shouldErase","_isCtrlDown","paintEventData","storeHistory","previousPixelData","pixelData","slice","segmentSet","Set","iterator","values","segmentsOnLabelmap","done","next","push","value","newPixelData","operation","imageIdIndex","diff","getDiffBetweenPixelData","pushState","isToolActive","renderBrush","external","cornerstone","updateImage","error","_endPainting","_mouseUpRender","_stopListeningForMouseUp","removeEventListener","EVENTS","MOUSE_UP","MOUSE_CLICK","addEventListener","oldRadius","radius","newRadius","Math","floor","event","ctrlKey","BaseTool","setup","env","createDebug","debug","default","coerce","disable","enable","enabled","humanize","require","Object","keys","forEach","key","instances","names","skips","formatters","selectColor","namespace","hash","i","length","charCodeAt","colors","abs","prevTime","args","self","curr","Number","Date","ms","prev","unshift","index","replace","match","format","formatter","val","call","splice","formatArgs","logFn","log","apply","useColors","color","destroy","extend","init","indexOf","delimiter","newDebug","namespaces","save","split","len","RegExp","substr","instance","map","toNamespace","join","test","regexp","toString","substring","stack","message","load","storage","localstorage","debugLib","window","process","type","__nwjs","navigator","userAgent","toLowerCase","document","documentElement","style","WebkitAppearance","console","firebug","exception","table","parseInt","$1","c","lastC","setItem","removeItem","r","getItem","warn","DEBUG","localStorage","setupDebug","j","v","JSON","stringify"],"mappings":"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","file":"cornerstoneTools.edb5f705e76316841eb2.hot-update.js","sourcesContent":["import BaseTool from './BaseTool.js';\nimport EVENTS from './../../events.js';\nimport external from './../../externalModules.js';\nimport isToolActive from './../../store/isToolActive.js';\nimport { getModule } from './../../store/index.js';\nimport { getDiffBetweenPixelData } from '../../util/segmentation';\n\nconst { configuration, getters, setters } = getModule('segmentation');\n\n/**\n * @abstract\n * @memberof Tools.Base\n * @classdesc Abstract class for tools which manipulate the mask data to be displayed on\n * the cornerstone canvas.\n * @extends Tools.Base.BaseTool\n */\nclass BaseBrushTool extends BaseTool {\n  constructor(props, defaultProps = {}) {\n    if (!defaultProps.configuration) {\n      defaultProps.configuration = { alwaysEraseOnClick: false };\n    }\n\n    super(props, defaultProps);\n\n    this.updateOnMouseMove = true;\n    this.hideDefaultCursor = true;\n\n    this._drawing = false;\n    this._drawingMouseUpCallback = this._drawingMouseUpCallback.bind(this);\n  }\n\n  // ===================================================================\n  // Abstract Methods - Must be implemented.\n  // ===================================================================\n\n  /**\n   * Helper function for rendering the brush.\n   *\n   * @abstract\n   * @param {Object} evt - The event.\n   * @returns {void}\n   */\n  // eslint-disable-next-line no-unused-vars\n  renderBrush(evt) {\n    throw new Error(`Method renderBrush not implemented for ${this.name}.`);\n  }\n\n  /**\n   * Paints the data to the labelmap.\n   *\n   * @protected\n   * @abstract\n   * @param  {Object} evt The event.\n   * @returns {void}\n   */\n  // eslint-disable-next-line no-unused-vars\n  _paint(evt) {\n    throw new Error(`Method _paint not implemented for ${this.name}.`);\n  }\n\n  // ===================================================================\n  // Virtual Methods - Have default behavior but may be overriden.\n  // ===================================================================\n\n  /**\n   * Event handler for MOUSE_DRAG event.\n   *\n   * @override\n   * @abstract\n   * @event\n   * @param {Object} evt - The event.\n   */\n  mouseDragCallback(evt) {\n    const { currentPoints } = evt.detail;\n\n    this._lastImageCoords = currentPoints.image;\n\n    // Safety measure incase _startPainting is overridden and doesn't always\n    // start a paint.\n    if (this._drawing) {\n      this._paint(evt);\n    }\n  }\n\n  /**\n   * Event handler for MOUSE_DOWN event.\n   *\n   * @override\n   * @abstract\n   * @event\n   * @param {Object} evt - The event.\n   */\n  preMouseDownCallback(evt) {\n    const eventData = evt.detail;\n    const { element, currentPoints } = eventData;\n\n    this._startPainting(evt);\n\n    this._lastImageCoords = currentPoints.image;\n    this._drawing = true;\n    this._startListeningForMouseUp(element);\n    this._paint(evt);\n\n    return true;\n  }\n\n  /**\n   * Initialise painting with BaseBrushTool.\n   *\n   * @abstract\n   * @event\n   * @param {Object} evt - The event.\n   * @returns {void}\n   */\n  _startPainting(evt) {\n    const eventData = evt.detail;\n    const element = eventData.element;\n\n    const {\n      labelmap2D,\n      labelmap3D,\n      currentImageIdIndex,\n      activeLabelmapIndex,\n    } = getters.labelmap2D(element);\n\n    const shouldErase =\n      this._isCtrlDown(eventData) || this.configuration.alwaysEraseOnClick;\n\n    this.paintEventData = {\n      labelmap2D,\n      labelmap3D,\n      currentImageIdIndex,\n      activeLabelmapIndex,\n      shouldErase,\n    };\n\n    if (configuration.storeHistory) {\n      const previousPixelData = labelmap2D.pixelData.slice();\n\n      this.paintEventData.previousPixelData = previousPixelData;\n    }\n  }\n\n  /**\n   * End painting with BaseBrushTool.\n   *\n   * @abstract\n   * @event\n   * @param {Object} evt - The event.\n   * @returns {void}\n   */\n  _endPainting(evt) {\n    const { labelmap2D, currentImageIdIndex } = this.paintEventData;\n\n    // Grab the labels on the slice.\n    const segmentSet = new Set(labelmap2D.pixelData);\n    const iterator = segmentSet.values();\n\n    const segmentsOnLabelmap = [];\n    let done = false;\n\n    while (!done) {\n      const next = iterator.next();\n\n      done = next.done;\n\n      if (!done) {\n        segmentsOnLabelmap.push(next.value);\n      }\n    }\n\n    labelmap2D.segmentsOnLabelmap = segmentsOnLabelmap;\n\n    if (configuration.storeHistory) {\n      const { previousPixelData } = this.paintEventData;\n      const newPixelData = labelmap2D.pixelData;\n      const operation = {\n        imageIdIndex: currentImageIdIndex,\n        diff: getDiffBetweenPixelData(previousPixelData, newPixelData),\n      };\n\n      setters.pushState(this.element, [operation]);\n    }\n  }\n\n  // ===================================================================\n  // Implementation interface\n  // ===================================================================\n\n  /**\n   * Event handler for MOUSE_MOVE event.\n   *\n   * @override\n   * @abstract\n   * @event\n   * @param {Object} evt - The event.\n   */\n  mouseMoveCallback(evt) {\n    const { currentPoints } = evt.detail;\n\n    this._lastImageCoords = currentPoints.image;\n  }\n\n  /**\n   * Used to redraw the tool's cursor per render.\n   *\n   * @override\n   * @param {Object} evt - The event.\n   */\n  renderToolData(evt) {\n    const eventData = evt.detail;\n    const element = eventData.element;\n\n    // Only brush needs to render.\n    if (isToolActive(element, this.name)) {\n      // Call the hover event for the brush\n      this.renderBrush(evt);\n    }\n  }\n\n  /**\n   * Event handler for switching mode to passive.\n   *\n   * @override\n   * @event\n   * @param {Object} evt - The event.\n   */\n  // eslint-disable-next-line no-unused-vars\n  passiveCallback(evt) {\n    try {\n      external.cornerstone.updateImage(this.element);\n    } catch (error) {\n      // It is possible that the image has not been loaded\n      // when this is called.\n      return;\n    }\n  }\n\n  /**\n   * Event handler for MOUSE_UP during the drawing event loop.\n   *\n   * @protected\n   * @event\n   * @param {Object} evt - The event.\n   * @returns {void}\n   */\n  _drawingMouseUpCallback(evt) {\n    const eventData = evt.detail;\n    const element = eventData.element;\n\n    this._endPainting(evt);\n\n    this._drawing = false;\n    this._mouseUpRender = true;\n    this._stopListeningForMouseUp(element);\n  }\n\n  newImageCallback(evt) {\n    if (this._drawing) {\n      // End painting on one slice and start on another.\n      this._endPainting(evt);\n      this._startPainting(evt);\n    }\n  }\n\n  /**\n   * Adds modify loop event listeners.\n   *\n   * @protected\n   * @param {Object} element - The viewport element to add event listeners to.\n   * @modifies {element}\n   * @returns {void}\n   */\n  _startListeningForMouseUp(element) {\n    element.removeEventListener(EVENTS.MOUSE_UP, this._drawingMouseUpCallback);\n    element.removeEventListener(\n      EVENTS.MOUSE_CLICK,\n      this._drawingMouseUpCallback\n    );\n\n    element.addEventListener(EVENTS.MOUSE_UP, this._drawingMouseUpCallback);\n    element.addEventListener(EVENTS.MOUSE_CLICK, this._drawingMouseUpCallback);\n\n    external.cornerstone.updateImage(element);\n  }\n\n  /**\n   * Adds modify loop event listeners.\n   *\n   * @protected\n   * @param {Object} element - The viewport element to add event listeners to.\n   * @modifies {element}\n   * @returns {void}\n   */\n  _stopListeningForMouseUp(element) {\n    element.removeEventListener(EVENTS.MOUSE_UP, this._drawingMouseUpCallback);\n    element.removeEventListener(\n      EVENTS.MOUSE_CLICK,\n      this._drawingMouseUpCallback\n    );\n\n    external.cornerstone.updateImage(element);\n  }\n\n  // ===================================================================\n  // Brush API. This is effectively a wrapper around the store.\n  // ===================================================================\n\n  /**\n   * Increases the brush size\n   *\n   * @public\n   * @api\n   * @returns {void}\n   */\n  increaseBrushSize() {\n    const oldRadius = configuration.radius;\n    let newRadius = Math.floor(oldRadius * 1.2);\n\n    // If e.g. only 2 pixels big. Math.floor(2*1.2) = 2.\n    // Hence, have minimum increment of 1 pixel.\n    if (newRadius === oldRadius) {\n      newRadius += 1;\n    }\n\n    setters.radius(newRadius);\n  }\n\n  /**\n   * Decreases the brush size\n   *\n   * @public\n   * @api\n   * @returns {void}\n   */\n  decreaseBrushSize() {\n    const oldRadius = configuration.radius;\n    const newRadius = Math.floor(oldRadius * 0.8);\n\n    setters.radius(newRadius);\n  }\n\n  _isCtrlDown(eventData) {\n    return (eventData.event && eventData.event.ctrlKey) || eventData.ctrlKey;\n  }\n}\n\nexport default BaseBrushTool;\n","/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n\n  Object.keys(env).forEach(key => {\n    createDebug[key] = env[key];\n  });\n\n  /**\n   * Active `debug` instances.\n   */\n  createDebug.instances = [];\n\n  /**\n   * The currently active debug mode names, and names to skip.\n   */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n\n  /**\n   * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n   *\n   * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n   */\n  createDebug.formatters = {};\n\n  /**\n   * Selects a color for a debug namespace\n   * @param {String} namespace The namespace string for the for the debug instance to be colored\n   * @returns {Number|String} An ANSI color code for the given namespace\n   * @api private\n   */\n  function selectColor(namespace) {\n    let hash = 0;\n\n    for (let i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n  createDebug.selectColor = selectColor;\n\n  /**\n   * Create a debugger with the given `namespace`.\n   *\n   * @param {String} namespace\n   * @returns {Function}\n   * @api public\n   */\n  function createDebug(namespace) {\n    let prevTime;\n\n    function debug(...args) {\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      const self = debug;\n\n      // Set `diff` timestamp\n      const curr = Number(new Date());\n      const ms = curr - (prevTime || curr);\n\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      }\n\n      // Apply any `formatters` transformations\n      let index = 0;\n\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return match;\n        }\n        index++;\n        const formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          const val = args[index];\n\n          match = formatter.call(self, val);\n\n          // Now we need to remove `args[index]` since it's inlined in the `format`\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      });\n\n      // Apply env-specific formatting (colors, etc.)\n      createDebug.formatArgs.call(self, args);\n\n      const logFn = self.log || createDebug.log;\n\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.enabled = createDebug.enabled(namespace);\n    debug.useColors = createDebug.useColors();\n    debug.color = selectColor(namespace);\n    debug.destroy = destroy;\n    debug.extend = extend;\n    // Debug.formatArgs = formatArgs;\n    // debug.rawLog = rawLog;\n\n    // env-specific initialization logic for debug instances\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    createDebug.instances.push(debug);\n\n    return debug;\n  }\n\n  function destroy() {\n    const index = createDebug.instances.indexOf(this);\n\n    if (index !== -1) {\n      createDebug.instances.splice(index, 1);\n\n      return true;\n    }\n\n    return false;\n  }\n\n  function extend(namespace, delimiter) {\n    const newDebug = createDebug(\n      this.namespace +\n        (typeof delimiter === 'undefined' ? ':' : delimiter) +\n        namespace\n    );\n\n    newDebug.log = this.log;\n\n    return newDebug;\n  }\n\n  /**\n   * Enables a debug mode by namespaces. This can include modes\n   * separated by a colon and wildcards.\n   *\n   * @param {String} namespaces\n   * @api public\n   */\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n\n    createDebug.names = [];\n    createDebug.skips = [];\n\n    let i;\n    const split = (typeof namespaces === 'string' ? namespaces : '').split(\n      /[\\s,]+/\n    );\n    const len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // Ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp(`^${namespaces.substr(1)}$`));\n      } else {\n        createDebug.names.push(new RegExp(`^${namespaces}$`));\n      }\n    }\n\n    for (i = 0; i < createDebug.instances.length; i++) {\n      const instance = createDebug.instances[i];\n\n      instance.enabled = createDebug.enabled(instance.namespace);\n    }\n  }\n\n  /**\n   * Disable debug output.\n   *\n   * @returns {String} namespaces\n   * @api public\n   */\n  function disable() {\n    const namespaces = [\n      ...createDebug.names.map(toNamespace),\n      ...createDebug.skips.map(toNamespace).map(namespace => `-${namespace}`),\n    ].join(',');\n\n    createDebug.enable('');\n\n    return namespaces;\n  }\n\n  /**\n   * Returns true if the given mode name is enabled, false otherwise.\n   *\n   * @param {String} name\n   * @returns {Boolean}\n   * @api public\n   */\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    let i;\n    let len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Convert regexp to namespace\n   *\n   * @param {RegExp} regxep\n   * @returns {String} namespace\n   * @api private\n   */\n  function toNamespace(regexp) {\n    return regexp\n      .toString()\n      .substring(2, regexp.toString().length - 2)\n      .replace(/\\.\\*\\?$/, '*');\n  }\n\n  /**\n   * Coerce `val`.\n   *\n   * @param {Mixed} val\n   * @returns {Mixed}\n   * @api private\n   */\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n\n  createDebug.enable(createDebug.load());\n\n  return createDebug;\n}\n\nexport default setup;\n","/* eslint-env browser */\n\nimport setup from './common.js';\n\n/**\n * This is the web browser implementation of `debug()`.\n */\nconst storage = localstorage();\n\nconst debugLib = {\n  formatArgs,\n  save,\n  load,\n  useColors,\n  storage,\n};\n/**\n * Colors.\n */\n\ndebugLib.colors = [\n  '#0000CC',\n  '#0000FF',\n  '#0033CC',\n  '#0033FF',\n  '#0066CC',\n  '#0066FF',\n  '#0099CC',\n  '#0099FF',\n  '#00CC00',\n  '#00CC33',\n  '#00CC66',\n  '#00CC99',\n  '#00CCCC',\n  '#00CCFF',\n  '#3300CC',\n  '#3300FF',\n  '#3333CC',\n  '#3333FF',\n  '#3366CC',\n  '#3366FF',\n  '#3399CC',\n  '#3399FF',\n  '#33CC00',\n  '#33CC33',\n  '#33CC66',\n  '#33CC99',\n  '#33CCCC',\n  '#33CCFF',\n  '#6600CC',\n  '#6600FF',\n  '#6633CC',\n  '#6633FF',\n  '#66CC00',\n  '#66CC33',\n  '#9900CC',\n  '#9900FF',\n  '#9933CC',\n  '#9933FF',\n  '#99CC00',\n  '#99CC33',\n  '#CC0000',\n  '#CC0033',\n  '#CC0066',\n  '#CC0099',\n  '#CC00CC',\n  '#CC00FF',\n  '#CC3300',\n  '#CC3333',\n  '#CC3366',\n  '#CC3399',\n  '#CC33CC',\n  '#CC33FF',\n  '#CC6600',\n  '#CC6633',\n  '#CC9900',\n  '#CC9933',\n  '#CCCC00',\n  '#CCCC33',\n  '#FF0000',\n  '#FF0033',\n  '#FF0066',\n  '#FF0099',\n  '#FF00CC',\n  '#FF00FF',\n  '#FF3300',\n  '#FF3333',\n  '#FF3366',\n  '#FF3399',\n  '#FF33CC',\n  '#FF33FF',\n  '#FF6600',\n  '#FF6633',\n  '#FF9900',\n  '#FF9933',\n  '#FFCC00',\n  '#FFCC33',\n];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (\n    typeof window !== 'undefined' &&\n    window.process &&\n    (window.process.type === 'renderer' || window.process.__nwjs)\n  ) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n  if (\n    typeof navigator !== 'undefined' &&\n    navigator.userAgent &&\n    navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)\n  ) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n  return (\n    (typeof document !== 'undefined' &&\n      document.documentElement &&\n      document.documentElement.style &&\n      document.documentElement.style.WebkitAppearance) || // Is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' &&\n      window.console &&\n      (window.console.firebug ||\n        (window.console.exception && window.console.table))) || // Is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' &&\n      navigator.userAgent &&\n      navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) &&\n      parseInt(RegExp.$1, 10) >= 31) || // Double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' &&\n      navigator.userAgent &&\n      navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/))\n  );\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  args[0] = `${(this.useColors ? '%c' : '') +\n    this.namespace +\n    (this.useColors ? ' %c' : ' ') +\n    args[0] +\n    (this.useColors ? '%c ' : ' ')}+${debugLib.humanize(this.diff)}`;\n\n  if (!this.useColors) {\n    return;\n  }\n\n  const c = `color: ${this.color}`;\n\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  let index = 0;\n  let lastC = 0;\n\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\n\ndebugLib.log = console.debug || console.log || function() {};\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      debugLib.storage.setItem('debug', namespaces);\n    } else {\n      debugLib.storage.removeItem('debug');\n    }\n  } catch (error) {\n    // Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  let r;\n\n  try {\n    r = debugLib.storage.getItem('debug');\n  } catch (error) {\n    console.warn(error);\n  } // Swallow\n  // XXX (@Qix-) should we be logging these?\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {\n    // Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nconst setupDebug = setup(debugLib);\nconst formatters = setupDebug.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return `[UnexpectedJSONParseError]: ${error.message}`;\n  }\n};\n\nexport default setupDebug;\n"],"sourceRoot":""}